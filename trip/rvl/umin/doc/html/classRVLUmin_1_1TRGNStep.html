<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>RvlUmin: RVLUmin::TRGNStep&lt; Scalar, Policy &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">RvlUmin&#160;<span id="projectnumber">1.0</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespaceRVLUmin.html">RVLUmin</a>      </li>
      <li class="navelem"><a class="el" href="classRVLUmin_1_1TRGNStep.html">TRGNStep</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>RVLUmin::TRGNStep&lt; Scalar, Policy &gt; Class Template Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="RVLUmin::TRGNStep" --><!-- doxytag: inherits="RVLAlg::Algorithm" -->
<p>Generic trust region (truncated GN) step.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="TRGNAlg_8hh_source.html">TRGNAlg.hh</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for RVLUmin::TRGNStep&lt; Scalar, Policy &gt;:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classRVLUmin_1_1TRGNStep.png" usemap="#RVLUmin::TRGNStep&lt; Scalar, Policy &gt;_map" alt=""/>
  <map id="RVLUmin::TRGNStep&lt; Scalar, Policy &gt;_map" name="RVLUmin::TRGNStep&lt; Scalar, Policy &gt;_map">
<area doxygen="RVLALG.tag:../../../alg/doc/html/" href="../../../alg/doc/html/classRVLAlg_1_1Algorithm.html" alt="RVLAlg::Algorithm" shape="rect" coords="0,0,232,24"/>
</map>
 </div></div>

<p><a href="classRVLUmin_1_1TRGNStep-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRVLUmin_1_1TRGNStep.html#a88cdf4099716450e6b742b9cf4ddd18c">run</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">here op = b-F(x), i.e.  <a href="#a88cdf4099716450e6b742b9cf4ddd18c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRVLUmin_1_1TRGNStep.html#a67a77185e27c8af0741cba443a3992db">TRGNStep</a> (Policy const &amp;_pol, <a class="elRef" doxygen="RVL.tag:../../../rvl/doc/html//" href="../../../rvl/doc/html/classRVL_1_1OperatorEvaluation.html">OperatorEvaluation</a>&lt; Scalar &gt; &amp;_opeval, atype _eta1, atype _eta2, atype _gamma1, atype _gamma2, atype &amp;_predred, atype &amp;_actred, atype &amp;_jval, atype &amp;_agnrm, atype &amp;_rgnrm, ostream &amp;_str)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">constructor  <a href="#a67a77185e27c8af0741cba443a3992db"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRVLUmin_1_1TRGNStep.html#afb83b3fb1b903b1ef3f1ad417054d862">~TRGNStep</a> ()</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename Scalar, typename Policy&gt;<br/>
 class RVLUmin::TRGNStep&lt; Scalar, Policy &gt;</h3>

<p>Generic trust region (truncated GN) step. </p>
<p>Trust region decision parameters are constants, so pass by value.</p>
<p>Operator evaluation, Function value, absolute and relative gradient norms, predicted and actual reduction, and trust radius are all altered by this object, so it stores mutable references for these items.</p>
<p>Parameters / data members: </p>
<ul>
<li>
pol - solver policy, see description in <a class="el" href="classRVLUmin_1_1TRGNAlg.html" title="Trust Region iteration.">TRGNAlg</a> docs (<a class="el" href="classRVLUmin_1_1TRGNAlg.html" title="Trust Region iteration.">TRGNAlg</a> is a policy subclass). Generates LS solver via build method. On construction, an LS solver is required to initialize the residual norm and normal residual norm, passed by reference, as well as the <a class="elRef" doxygen="RVL.tag:../../../rvl/doc/html//" href="../../../rvl/doc/html/classRVL_1_1Vector.html">RVL::Vector</a> update. </li>
<li>
opeval - <a class="elRef" doxygen="RVL.tag:../../../rvl/doc/html//" href="../../../rvl/doc/html/classRVL_1_1OperatorEvaluation.html">RVL::OperatorEvaluation</a>, mutable reference, 0.5*getValue().normsq() = objective function </li>
<li>
eta1 - lower G-A parameter; when actred/predred &lt; eta1, trust radius reduced. Typical value = 0.01 </li>
<li>
eta2 - upper G-A parameter; when actred/predred &gt; eta2 and trust region constraint is binding, trust radius increased. Typical value = 0.9 </li>
<li>
gamma1 - trust region reduction factor. Typical value = 0.5 </li>
<li>
gamma2 - trust region increase factor. Typical value = 1.8 </li>
<li>
predred - predicted reduction - mutable reference </li>
<li>
actred - actual reduction - mutable reference </li>
<li>
jval - objective function value - mutable reference </li>
<li>
agnrm - gradient norm - mutable reference </li>
<li>
rgnrm - gradient norm scaled by reciprocal of initial (on constr) - mutable reference </li>
<li>
Delta - trust radius - mutable reference </li>
<li>
str - verbose output stream </li>
</ul>
<p>Outline of <a class="el" href="classRVLUmin_1_1TRGNStep.html#a88cdf4099716450e6b742b9cf4ddd18c" title="here op = b-F(x), i.e.">run()</a> method: </p>
<ul>
<li>
call trust region least squares solver to return step </li>
<li>
create trial iterate (storing input iterate in case of rejection) </li>
<li>
compute predicted, actual reductions in objective (predred, actred) </li>
<li>
if actred/predred &lt; eta1, reduce trust radius by factor gamma1, reject step, restore iterate from stored input  </li>
<li>
if actred/predred &gt;= eta1, accept step (discard stored input) <ul>
<li>
if additionally actred/predred &gt; eta2 and trust region constraint was binding on LS solution, increase trust radius by factor gamma2 </li>
</ul>
</li>
<li>
return </li>
</ul>

<p>Definition at line <a class="el" href="TRGNAlg_8hh_source.html#l00056">56</a> of file <a class="el" href="TRGNAlg_8hh_source.html">TRGNAlg.hh</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a67a77185e27c8af0741cba443a3992db"></a><!-- doxytag: member="RVLUmin::TRGNStep::TRGNStep" ref="a67a77185e27c8af0741cba443a3992db" args="(Policy const &amp;_pol, OperatorEvaluation&lt; Scalar &gt; &amp;_opeval, atype _eta1, atype _eta2, atype _gamma1, atype _gamma2, atype &amp;_predred, atype &amp;_actred, atype &amp;_jval, atype &amp;_agnrm, atype &amp;_rgnrm, ostream &amp;_str)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Scalar, typename Policy&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRVLUmin_1_1TRGNStep.html">RVLUmin::TRGNStep</a>&lt; Scalar, Policy &gt;::<a class="el" href="classRVLUmin_1_1TRGNStep.html">TRGNStep</a> </td>
          <td>(</td>
          <td class="paramtype">Policy const &amp;&#160;</td>
          <td class="paramname"><em>_pol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="RVL.tag:../../../rvl/doc/html//" href="../../../rvl/doc/html/classRVL_1_1OperatorEvaluation.html">OperatorEvaluation</a>&lt; Scalar &gt; &amp;&#160;</td>
          <td class="paramname"><em>_opeval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">atype&#160;</td>
          <td class="paramname"><em>_eta1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">atype&#160;</td>
          <td class="paramname"><em>_eta2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">atype&#160;</td>
          <td class="paramname"><em>_gamma1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">atype&#160;</td>
          <td class="paramname"><em>_gamma2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">atype &amp;&#160;</td>
          <td class="paramname"><em>_predred</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">atype &amp;&#160;</td>
          <td class="paramname"><em>_actred</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">atype &amp;&#160;</td>
          <td class="paramname"><em>_jval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">atype &amp;&#160;</td>
          <td class="paramname"><em>_agnrm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">atype &amp;&#160;</td>
          <td class="paramname"><em>_rgnrm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ostream &amp;&#160;</td>
          <td class="paramname"><em>_str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>constructor </p>
<p>Depends on least-squares solver, chosen by the policy argument. Type of this object passed as template parameter. For characteristics, see <a class="el" href="classRVLUmin_1_1TRGNAlg.html" title="Trust Region iteration.">TRGNAlg</a> docs.</p>
<p>Pass already-initialized operator evaluation to this method. This evaluation stores the RHS (opeval.getValue()) and LinearOp (opeval.getDeriv) of the G-N least squares problem. The evaluation point is updated as part of the step, so the opeval reference must be mutable.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">_pol</td><td>- solver policy, see descriptions in <a class="el" href="classRVLUmin_1_1TRGNAlg.html" title="Trust Region iteration.">TRGNAlg</a> docs </td></tr>
    <tr><td class="paramname">_opeval</td><td>- updated reference, 0.5*getValue().normsq() = objective function </td></tr>
    <tr><td class="paramname">_eta1</td><td>lower G-A parameter &gt; 0 </td></tr>
    <tr><td class="paramname">_eta2</td><td>upper G-A parameter &gt; eta1 </td></tr>
    <tr><td class="paramname">_gamma1</td><td>trust region reduction factor &lt; 1 </td></tr>
    <tr><td class="paramname">_gamma2</td><td>trust region expansion factor &gt; 1, gamma1*gamma2 &lt; 1 </td></tr>
    <tr><td class="paramname">_predred</td><td>predicted reduction - updated reference </td></tr>
    <tr><td class="paramname">_actred</td><td>actual reduction - updated reference </td></tr>
    <tr><td class="paramname">_jval</td><td>objective function value - updated reference </td></tr>
    <tr><td class="paramname">_agnrm</td><td>gradient norm - updated reference </td></tr>
    <tr><td class="paramname">_rgnrm</td><td>gradient norm scaled by reciprocal of original (on constr) - updated reference </td></tr>
    <tr><td class="paramname">_Delta</td><td>trust radius - updated reference </td></tr>
    <tr><td class="paramname">_str</td><td>verbose output stream</td></tr>
  </table>
  </dd>
</dl>
<p>Requirements on parameters: </p>
<ul>
<li>
Delta &gt;= 0 </li>
<li>
0 &lt; gamma1 &lt; 1 &lt; gamma2  </li>
<li>
gamma1 * gamma2 &lt; 1 </li>
<li>
0 &lt; eta1 &lt; eta2 </li>
<li>
opeval = operator defining nonlinear least squares problem, evaluated at current iterate. used to supply RHS (getValue) and LinearOp (getDeriv) of G-N problem on call, and to evaluate residual and normal residual at G-N solution on return. </li>
<li>
pol - TRLS solver policy, as described above </li>
</ul>

<p>Definition at line <a class="el" href="TRGNAlg_8hh_source.html#l00154">154</a> of file <a class="el" href="TRGNAlg_8hh_source.html">TRGNAlg.hh</a>.</p>

</div>
</div>
<a class="anchor" id="afb83b3fb1b903b1ef3f1ad417054d862"></a><!-- doxytag: member="RVLUmin::TRGNStep::~TRGNStep" ref="afb83b3fb1b903b1ef3f1ad417054d862" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Scalar, typename Policy&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRVLUmin_1_1TRGNStep.html">RVLUmin::TRGNStep</a>&lt; Scalar, Policy &gt;::~<a class="el" href="classRVLUmin_1_1TRGNStep.html">TRGNStep</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="TRGNAlg_8hh_source.html#l00220">220</a> of file <a class="el" href="TRGNAlg_8hh_source.html">TRGNAlg.hh</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a88cdf4099716450e6b742b9cf4ddd18c"></a><!-- doxytag: member="RVLUmin::TRGNStep::run" ref="a88cdf4099716450e6b742b9cf4ddd18c" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Scalar, typename Policy&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classRVLUmin_1_1TRGNStep.html">RVLUmin::TRGNStep</a>&lt; Scalar, Policy &gt;::run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>here op = b-F(x), i.e. </p>
<p>the residual - use ResidualOp wrapper</p>
<p>NOTE: this is the "optimistic" no-copy form - i.e. assumes that the step is likely to succeed, so the restor-xsave-compute branch is unlikely, hence not costly. A "pessimistic" form would be a mirror-image. The optimal form would involve a deep copy operation on OpEvals, which is certainly possible future mod. </p>

<p>Implements <a class="elRef" doxygen="RVLALG.tag:../../../alg/doc/html/" href="../../../alg/doc/html/classRVLAlg_1_1Algorithm.html#a1f2607e339d136836946b756b7e21dc0">RVLAlg::Algorithm</a>.</p>

<p>Definition at line <a class="el" href="TRGNAlg_8hh_source.html#l00071">71</a> of file <a class="el" href="TRGNAlg_8hh_source.html">TRGNAlg.hh</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="TRGNAlg_8hh_source.html">TRGNAlg.hh</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Thu Jan 29 2015 14:34:20 for RvlUmin by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
