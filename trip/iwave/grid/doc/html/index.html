<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>IWAVEGRID: IWAVE Grid I/O package</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">IWAVEGRID&#160;<span id="projectnumber">1.0</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>IWAVE Grid I/O package </h1>  </div>
</div>
<div class="contents">
<div class="textblock"><p>Authors: William W. Symes and Xin Wang </p>
<p>Implements regular grid data structure and related i/o, based on RSF file format (<a href="http://www.reproducibility.org/wiki/Guide_to_RSF_file_format">http://www.reproducibility.org/wiki/Guide_to_RSF_file_format</a>) </p>
<ul>
<li>
struct <a class="el" href="grid_8h.html#ae045cbf1e1e13b264909a1fb9ac75e86">axis</a> defines a <a class="el" href="structgrid.html">grid</a> axis. An <a class="el" href="grid_8h.html#ae045cbf1e1e13b264909a1fb9ac75e86">axis</a> has four attributes: the number of gridpoints on the axis (n), the step between gridpoints (d), the coordinate of the first gridpoint (o), and the axis index (id) which indicates its position in the a reference ordering of axes (see Notes below for more on this). Functions provided: <ul>
<li>
<a class="el" href="grid_8h.html#a92ee2ca8b58522969904c83bf37fbd36">init_default_axis</a> : default initialization  </li>
<li>
<a class="el" href="grid_8h.html#aafd262df63fb3179387b981672059ad5">fprint_axis</a>&lt; print axis to stream /li&gt; </li>
<li>
<a class="el" href="grid_8h.html#a688fe60460e05fd246edf01b40c12bc3">print_axis</a> : print axis to stdout  </li>
<li>
<a class="el" href="grid_8h.html#ab819660086e2a7c66e662366a860f278">compare_axis</a> : compare two axes for equality  </li>
</ul>
</li>
<li>
struct <a class="el" href="structgrid.html">grid</a> consists of up to IWAVEBASE::RARR_MAX_NDIM axes. Functions provided: <ul>
<li>
<a class="el" href="grid_8h.html#a05e42af1f6912f163252bec4f5b24820">init_grid</a> : initializes grid of dimension dim - default-initializes dim axes, assigns id's in natural order  </li>
<li>
<a class="el" href="grid_8h.html#a98964590b8470f2843e4706b9c68c159">fprint_grid</a> : print grid to stream  </li>
<li>
<a class="el" href="grid_8h.html#a98964590b8470f2843e4706b9c68c159">fprint_grid</a> : print grid to stdout  </li>
<li>
<a class="el" href="grid_8h.html#a30040740204e36f554b5cb9e4194915c">compare_grid</a> : compare two grids by comparing dimensions, axes </li>
<li>
<a class="el" href="grid_8h.html#a330ac449e15cb27ab637a5d3b087c326">get_datasize_grid</a> : return number of gridpoints  </li>
<li>
<a class="el" href="grid_8h.html#a43cfda5c13f47f2d1552b7e9d6e0180a">get_n</a> : extract array (<a class="elRef" doxygen="IWAVEBASE.tag:../../../base/doc/html/" href="../../../base/doc/html/utils_8h.html#IPNT">IPNT</a>) of axis lengths (n's)  </li>
<li>
<a class="el" href="grid_8h.html#a93a1d18dc7b58df6028354be1c8aa397">get_d</a> : extract array (<a class="elRef" doxygen="IWAVEBASE.tag:../../../base/doc/html/" href="../../../base/doc/html/utils_8h.html#RPNT">RPNT</a>) of grid steps (d's)  </li>
<li>
<a class="el" href="grid_8h.html#a538d09004bcf4081119b16ab46249dc6">get_o</a> : extract array (<a class="elRef" doxygen="IWAVEBASE.tag:../../../base/doc/html/" href="../../../base/doc/html/utils_8h.html#RPNT">RPNT</a>) of grid origin coordinates (o's)  </li>
<li>
<a class="el" href="grid_8h.html#a7bc59e3ceb749aa09d1f440ccd9527ef">get_gs</a> : extract array (<a class="elRef" doxygen="IWAVEBASE.tag:../../../base/doc/html/" href="../../../base/doc/html/utils_8h.html#IPNT">IPNT</a>) of global indices of grid origin  </li>
<li>
<a class="el" href="grid_8h.html#a7757e5d5c23620bbd464d67db033e1ae">get_ord</a> : extract axis order array (<a class="elRef" doxygen="IWAVEBASE.tag:../../../base/doc/html/" href="../../../base/doc/html/utils_8h.html#IPNT">IPNT</a>) </li>
</ul>
</li>
<li>
Grid i/o package consists of functions <ul>
<li>
<a class="el" href="gridio_8h.html#a3175d6ca41b8b8bc6eae1e60b3e1e044">read_grid</a> : read grid from RSF header file  </li>
<li>
<a class="el" href="gridio_8h.html#ad42727c5c50ee68759ccd165f9208a21">par_grid</a> : construct grid from PARARRAY  </li>
<li>
<a class="el" href="gridio_8h.html#a86f3ad9e9fc55e4a856473c5828131ca">extend_array</a> : extrapolate array data by constant along an axis  </li>
<li>
<a class="el" href="gridio_8h.html#a0dd522100ec07395eab65c7d0b961cc9">rsfread</a> : read ireal array from RSF file pair  </li>
<li>
<a class="el" href="gridio_8h.html#aebc26303b7453981c3c310cadfee492f">rsfwrite</a> : write ireal array to RSF file pair  </li>
</ul>
</li>
</ul>
<p>Notes: </p>
<ol>
<li>
<p class="startli">The implementation is independent of the Madagascar code package - it uses only the RSF file format as described in the document referenced above.  </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">IWAVE::grid does <b>not</b> implement these two features of Madagascar's package: </p>
<ul>
<li>
DATAPATH: The output file (value associated to keyword in) is a relative or fully qualified pathname in IWAVE::grid usage, without any implicit completion. In particular, IWAVE::grid <b>ignores</b> any DATAPATH environment variable, datapath= specification on command line, datapath file in the working directory, and so on. </li>
<li>
Only two data formats are currently recognized, namely native 4-byte floating point real and XDR-encoded 4-byte floating point real, signalled by data_format=native_float and data_format=xdr_float respectively. The esize keyword (a holdover from SEPlib) is ignored. Thus all data is stored in 4-byte floating point form. The data can however be read to, or written from, any format for which implicit type conversion in C is defined, for example 8-byte real (double). The the ireal typedef (see <a href="../../../base/doc/html/index.html">IWAVE base library docs</a> for more on this) defines the choice of internal data representation.  </li>
</ul>
<p class="endli"></p>
</li>
<li>
<p class="startli">IWAVE::grid provides two keyword choices in addition to those defined by Madagascar: </p>
<ul>
<li>
Value scaling: inclusion of the scale keyword causes the data to be multiplied (divided) by the power of 10 indicated by the corresponding value, as it is read (written). This feature permits the user to change metric units 'on the fly', and avoid external pre/postprocessing of data files. For example, to read data in m/ms when it is stored on disk in m/s, insert 'scale=-3' in the RSF header file. </li>
<li>
Physical axis assignment: typical applications assign physical meaning to the coordinate axes (such as depth). To permit the axis ordering to be intperpreted properly without requiring that data files be transposed, IWAVE::grid provides keywords x_axis, y_axis, and z_axis to tag up to three axes in the data. The internal tags (axis id numbers) corresponding to these keywords are 2, 3, and 1 respectively. For example, including 'x_axis=1' in the RSF header file causes axis 1 (that is the fastest array index) to assigned with id=2. Applications using the grid data structure can use this information to identify axis 1 as 'the x axis', whatever that means in the application's terms. For example, for trace sampling it permits a sampling application to interpret shot and receiver x coordinates as indicating positions on axis 1. </li>
</ul>
<p class="endli"></p>
</li>
<li>
Parallel implementation: all i/o takes place on rank 0. Implementation assumes that a chunk consisting of a number <a class="el" href="mpigridio_8h.html#ac07833dff29d6a74471b73c3344fd7e4">N_SLOWEST_AXIS_SLICE</a> of (dim-1) slices may be safely stored in an in-core buffer. Reads: data read into buffer from file on rank 0, then broadcast to all other ranks. Each rank computes that part of the data needed locally, then stores it. Writes: roughly the reverse of read, but implemented with point-to-point communication, hence slower.  </li>
</ol>
<hr/>
 <a href="../../../doc/html/index.html">IWAVE Home Page</a> </p>
</div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Dec 3 2014 12:26:27 for IWAVEGRID by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
