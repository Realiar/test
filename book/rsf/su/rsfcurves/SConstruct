from rsf.proj import *

Flow('image',None,
     '''
     spike n1=64 n2=32 d2=1 o2=0 label2=Trace unit2=
     nsp=3 k1=8,20,32 k2=4 l2=28 p2=2,1,0 |
     trapez 
     ''')
Plot('image','grey wanttitle=n min2=0 max2=32')
Plot('imagew','image',
     'wiggle poly=y yreverse=y transp=y wanttitle=n plotcol=7 gridcol=6 min2=0 max2=32')

points = (
    '''
    0.124	0.0
    0.124	16.0
    0.124	32.0
    ''',
    '''
    0.060	0.0
    0.124	16.0
    0.188	32.0
    ''',
    '''
    -0.004	0.0
    0.124	16.0
    0.252	32.0
    ''',
    '''
    0.124000 0.000000
    0.124000 16.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.124000 32.000000
    0.060000  0.000000
    0.124000 16.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
    0.188000 32.000000
   -0.004000  0.000000
    0.124000 16.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    0.252000 32.000000
    ''')

curves = []
for c in range(len(points)):
    curve = 'curve%d' % c
    Flow(curve+'.asc',None,
         '''
         echo %s data_format=ascii_float 
         n1=2 n2=%d in=$TARGET
         ''' % (points[c],(3,96)[c==3]))
    Plot(curve,curve+'.asc',
         '''
         dd form=native type=complex |
         window |
         graph yreverse=y transp=y plotcol=%d plotfat=3
         min1=0 max1=0.252 min2=0 max2=32
         wanttitle=n wantaxis=n
         ''' % (3,0,5,3)[c])
    curves.append(curve)

Result('image1',['image' ]+curves[:3],'Overlay')
Result('image2',['imagew']+curves[:3],'Overlay')
Result('image3',['imagew', curves[3]],'Overlay')

End()
